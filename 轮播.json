function banner(d, blist, time, id) {
    var arrs = [];
    for (let ii in blist) {    
        arrs.push(blist[ii].img);       
    }
    if (id == undefined || typeof(id) != 'string') {
        id = '0';
    }
    if (time == undefined || time < 100) {
        time = 5000
    }   
   var j = getMyVar('j', '0')
        clearMyVar('j')
        if (j > blist.length - 1) {
            j = 0
        }
    d.push({
        img: blist[j].img,
        desc: '0',
        url: blist[j].img,
        col_type: 'card_pic_1',
        extra: {
            id: id,
            longClick: [{
                title: getItem("ms", "0") == "1" ? "▶️继续轮播" : "⏸停止轮播",
                js: $.toString((id) => {
setItem('ms', getItem('ms', '0') == '0' ? '1' : '0');  
                     if (getItem("ms","0") == "1") {
                        setItem('停止', '0')
                        refreshPage()
                        toast('轮播已停止')
                        }else 
                     if (getItem("ms","1") == "0") {
                        clearItem('停止')
                        refreshPage()
                        toast('轮播已打开')                    
                        }
                                      
                }, id)
            }, {
                title: '🍁添加网址',
                js: $.toString(() => {
                    return $('https://t.mwm.moe/moe/', "请输入随机图片网址，API").input(() => {
                        if (/http|storage|hiker/.test(input)) {
                            clearItem('list');
                            clearItem('pic');
                            setItem('img', input);
                            setItem('pic', '6');
                            refreshPage();
                            toast('图片已更换');
                        } else {
                            toast('不是正确网址')
                        }
                    });

                })
            }, {
                title: '🔥选择网站',
                js: $.toString((id) => {
                    var list = ["🌿本地图片", "🌲彼岸壁纸", "🍎3G壁纸", "🍊壁纸之家", "🍌回车桌面", "🍇壁纸360", "🍉摄图网", "🍀高清壁纸", "🌿千叶网", "🌺典雅壁纸"];
                    list[getItem('list')] = '‘‘’’<span style="color:red">' + list[getItem('list')] + '</span>';
                    return 'select://' + JSON.stringify({
                        "title": "选择图片网站",
                        "options": list,
                        col: 2,
                        js: $.toString((id) => {
                            switch (input) {
                                case '🌿本地图片':
                                    setItem('list', '0');
                                    clearItem('pic');
                                    setItem('pic', '0');
                                    refreshPage();
                                    toast('图片已更换');
                                    break
                                case '🌲彼岸壁纸':
                                    setItem('list', '1');
                                    clearItem('pic');
                                    setItem('pic', '1');
                                    refreshPage();
                                    toast('图片已更换');
                                    break
                                case '🍎3G壁纸':
                                    setItem('list', '2');
                                    clearItem('pic');
                                    setItem('pic', '2');
                                    refreshPage();
                                    toast('图片已更换');
                                    break
                                case '🍊壁纸之家':
                                    setItem('list', '3');
                                    clearItem('pic');
                                    setItem('pic', '3');
                                    refreshPage();
                                    toast('图片已更换');
                                    break
                                case '🍌回车桌面':
                                    setItem('list', '4');
                                    clearItem('pic');
                                    setItem('pic', '4');
                                    refreshPage();
                                    toast('图片已更换');
                                    break
                                case '🍇壁纸360':
                                    setItem('list', '5');
                                    clearItem('pic');
                                    setItem('pic', '7');
                                    refreshPage();
                                    toast('图片已更换');
                                    break
                                case '🍉摄图网':
                                    setItem('list', '6');
                                    clearItem('pic');
                                    setItem('pic', '5');
                                    refreshPage();
                                    toast('图片已更换');
                                    break
                                case '🍀高清壁纸':
                                    setItem('list', '7');
                                    clearItem('pic');
                                    setItem('pic', '8');
                                    refreshPage();
                                    toast('图片已更换');
                                    break 
                                case '🌿千叶网':
                                    setItem('list', '8');
                                    clearItem('pic');
                                    setItem('pic', '9');
                                    refreshPage();
                                    toast('图片已更换');
                                    break
                                case '🌺典雅壁纸':
                                    setItem('list', '9');
                                    clearItem('pic');
                                    setItem('pic', '10');
                                    refreshPage();
                                    toast('图片已更换');
                                    break           
                            }
                        }, id)
                    });
                }, id)
            }]
        }
    })
    j++
    putMyVar('j', j);
    registerTask(id, time, $.toString((blist, id, arrs) => {
        var i = getMyVar('i', '0')
        clearMyVar('i')
        if (i > blist.length - 1) {
            i = 0
        }
        try {
            updateItem(id, {
                img: blist[i].img,
                url: $('#noLoading#').lazyRule((arrs, i) => {
                    return 'pics://' + arrs.slice(i).join('&&')
                }, arrs, i),
                desc: '0',
            })
        } catch (e) {
            //log(e.message)
            unRegisterTask('banner')
        }
        i++
        putMyVar('i', i)
    }, blist, id, arrs))
    if (getItem('停止') == 0) {
        unRegisterTask(id);
    }
    return d
}
var arr = []
switch (getItem('pic')) {
    case '0':
        try {
            var javaImport = new JavaImporter();
            javaImport.importPackage(
                Packages.com.example.hikerview.utils,
                Packages.java.io,
            );
            with(javaImport) {
                var file = new File('/storage/emulated/0/Pictures/');
                var fileList = file.listFiles().filter(h => h.isFile() && /\.(jpg|jpeg|png|gif|webp)/.test(h));
            }
            for (var i in fileList) {
                arr.push({
                    img: fileList[i],
                });
            }
        } catch (e) {}
        if (arr == '') {
            toast('目录不存在或空,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
    case '1':
        var x = Math.floor(Math.random() * 1049) + 2
        var html = request('https://pic.netbian.com/index_' + x + '.html', {})
        var list = pdfa(html, '.slist&&img')
        for (var i = 0; i < list.length; i++) {
            arr.push({
                img: 'https://pic.netbian.com' + pdfh(list[i], 'img&&src'),
            })
        }
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
    case '2':
        var x = Math.floor(Math.random() * 136);
        var html = request('https://m.desk.3gbizhi.com/index_' + x + '.html');
        var list = pdfa(html, '.contlistw&&li');
        list.forEach(data => {
            arr.push({
                img: pdfh(data, 'img&&lay-src')
            })
        })
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
    case '3':
        var x = Math.floor(Math.random() * 1117)
        var html = request('https://www.bizhi3.com/diannaobizhi/list_' + x + '.html');
        var list = pdfa(html, '.po_ul&&img');
        list.forEach(data => {
            arr.push({
                img: 'https:' + pdfh(data, 'img&&src')
            })
        })
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
    case '4':
        var x = Math.floor(Math.random() * 709)
        var html = request('https://m.hczm1.com/zhuomianbizhi/' + x + '.html', {
            headers: {
                'X-requested-With': 'cn.nr19.mbrowser'
            }
        });
        var list = pdfa(html, '.mbig_pic_list&&img');
        for (var i = 0; i < list.length; i++) {
            arr.push({
                img: pdfh(list[i], 'img&&src'),
            })
        }
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
    case '5':
        var x = Math.floor(Math.random() * 16)
        var html = request('https://m.699pic.com/sousuo-diannaobizhi-0-complex-horizontal-0-all-all-' + x + '-0-0-0-0-0-0-all-all-739-0.html');
        var list = pdfa(html, '.res-list&&img');
        list.forEach(data => {
            arr.push({
                img: 'https:' + pdfh(data, 'img&&src')
            })
        })
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
   case '6':
       // var pic = 'https://www.dmoe.cc/random.php';
        for (var i = 0; i < 10; i++) {
            arr.push({
                img: getItem('img') + '#' + Math.random(),
            })
        }
        break
    case '7':
        var x = Math.floor(Math.random() * 473) + 2;
        var html = request('http://www.bizhi360.com/desk/list_' + x + '.html');
        var list = pdfa(html, '.pic-list&&li');
        list.forEach(data => {
            arr.push({
                img: pdfh(data, 'img&&src')
            })
        })
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
    case '8':
        var x = Math.floor(Math.random() * 350) * 20
        try {
            var html = request('https://vt.sm.cn/api/pic/list?query=%E7%94%B5%E8%84%91%E5%A3%81%E7%BA%B8&tag=&limit=20&start=' + x, {});
            var list = JSON.parse(html).data.hit.imgInfo.item
            list.forEach(data => {
                arr.push({
                    img: data.bigPicUrl,
                })
            })
        } catch (e) {}
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
    case '9':
        var x = Math.floor(Math.random() * 411);
        var html = request('http://qianye88.com/3840x2160/'+x+'.html');
        var list = pdfa(html, '.flex-images&&img');
        list.forEach(data => {
            arr.push({
                img: pdfh(data, 'img&&data-original').replace(/(.*?)\?.*/, '$1')
            })
        })
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break
    case '10':
        var x = Math.floor(Math.random() * 394) + 1;
        var html = request('https://www.dianyabizhi.com/diannaobizhi/list_' + x + '.html');
        var list = pdfa(html, '.po_ul&&img');
        list.forEach(data => {
            arr.push({
                img: pdfh(data, 'img&&src').includes('http') ? pdfh(data, 'img&&src') : 'https://www.dianyabizhi.com' + pdfh(data, 'img&&src')
            })
        })
        if (arr == '') {
            toast('网站获取失败,切换到默认API');
            clearItem('pic');
            clearItem('list');
        }
        break        
}
if (arr == '') {
    for (let i = 0; i < 10; i++) {
        arr.push({
            img: 'https://www.dmoe.cc/random.php'+ '#' + Math.random()
        })
    }
}
gengxin = '新增,典雅壁纸，1.13'
